<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MRW track control (next generation): can Directory Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="mrw128.gif"/></td>
  <td id="projectalign">
   <div id="projectname">MRW track control (next generation)
   </div>
   <div id="projectbrief">Welcome to the modelrailway next generation.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_3fb58befa5a5aac34aab8587948ccb58.html">can</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="headertitle"><div class="title">can Directory Reference</div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>To use CAN bus via <em>socketcan</em> you need a configured CAN bus adapter. By default the corresponding CAN bus driver is loaded on Linux boot. Look with <code>ifconfig -a</code> if the <em>can0</em> interface is generally available. Then you can configure the CAN bus by calling the following commands: </p><div class="fragment"><div class="line">ifconfig can0 type can bitrate 125000</div>
<div class="line">ifconfig can0 txqueuelen 1000</div>
<div class="line">ip link set up can0</div>
</div><!-- fragment --><p> <b>Note:</b> The CAN bus bitrate must be 125.000 bits per second.</p>
<p>After that you can verify the working CAN bus by calling: </p><div class="fragment"><div class="line">mrw-host(~) 4&gt; ip -details link show can0</div>
<div class="line">3: can0: &lt;NOARP,UP,LOWER_UP,ECHO&gt; mtu 16 qdisc pfifo_fast state UP mode DEFAULT group default qlen 1000</div>
<div class="line">    link/can  promiscuity 0 minmtu 0 maxmtu 0</div>
<div class="line">    can state ERROR-WARNING restart-ms 0</div>
<div class="line">          bitrate 125000 sample-point 0.875</div>
<div class="line">          tq 500 prop-seg 6 phase-seg1 7 phase-seg2 2 sjw 1</div>
<div class="line">          gs_usb: tseg1 1..16 tseg2 1..8 sjw 1..4 brp 1..1024 brp-inc 1</div>
</div><!-- fragment --><p>To shutdown the CAN bus you can call: </p><div class="fragment"><div class="line">ip link set down can0</div>
</div><!-- fragment --><h1>Software support</h1>
<p>The <a class="el" href="d9/d9b/namespacemrw_1_1can.html" title="The mrw::can namespace provides the CAN bus infrastructure using the Qt serialbus API.">mrw::can</a> namespace provides the CAN bus infrastructure using the Qt serialbus API. The classes are prepared for using with the model railway infrastructure. So all model railway constants for Command and Result codes are defined in this namespace. To use the CAN bus simply deriv a class from the MrwBus Service class and overload the MrwBusService::process() method. This method gets the preparsed CAN message as a MrwMessage instance.</p>
<p>For the CAN bus communication you can configure the interface and plugin in the QCanBusDevice class manner. To use a unique behaviour on a per host basis use the CanSettings class</p>
<p>The MrwBusService allows to connect to the CAN bus manually. So you have to set the auto_connect parameter to false and call the QCanBusService::connectDevice() method manually. </p>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Apr 7 2025 12:11:09 for MRW track control (next generation) by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2
</small></address>
</div><!-- doc-content -->
</body>
</html>
